

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorial: Log Anomaly Detection Using LogAI &mdash; LogAI  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorial: Log Clustering using LogAI" href="tutorial_log_clustering.html" />
    <link rel="prev" title="Tutorials" href="../tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> LogAI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../tutorial.html">Tutorials</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tutorial: Log Anomaly Detection Using LogAI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Load-Data">Load Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Preprocess">Preprocess</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Parsing">Parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Time-series-Anomaly-Detection">Time-series Anomaly Detection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Feature-Extraction">Feature Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Anomaly-Detection">Anomaly Detection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Semantic-Anomaly-Detection">Semantic Anomaly Detection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Vectorization-for-unstructured-loglines">Vectorization for unstructured loglines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Categorical-Encoding-for-log-attributes">Categorical Encoding for log attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Feature Extraction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Anomaly Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_log_clustering.html">Tutorial: Log Clustering using LogAI</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">LogAI Core Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">logai</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">LogAI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutorial.html">Tutorials</a> &raquo;</li>
        
      <li>Tutorial: Log Anomaly Detection Using LogAI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/tutorial_log_anomaly_detection.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Tutorial:-Log-Anomaly-Detection-Using-LogAI">
<h1>Tutorial: Log Anomaly Detection Using LogAI<a class="headerlink" href="#Tutorial:-Log-Anomaly-Detection-Using-LogAI" title="Permalink to this heading">¶</a></h1>
<p>This is an example to show how to use LogAI to conduct log anomaly detection analysis.</p>
<section id="Load-Data">
<h2>Load Data<a class="headerlink" href="#Load-Data" title="Permalink to this heading">¶</a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">OpensetDataLoader</span></code> to load a sample open log dataset. Here we use HealthApp dataset from <a class="reference external" href="https://zenodo.org/record/3227177#.Y1M3LezML0o">LogHub</a> as an example.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">logai.dataloader.openset_data_loader</span> <span class="kn">import</span> <span class="n">OpenSetDataLoader</span><span class="p">,</span> <span class="n">OpenSetDataLoaderConfig</span>

<span class="c1">#File Configuration</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;datasets&quot;</span><span class="p">,</span> <span class="s2">&quot;HealthApp_2000.log&quot;</span><span class="p">)</span> <span class="c1"># Point to the target HealthApp.log dataset</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s2">&quot;HealthApp&quot;</span>
<span class="n">data_loader</span> <span class="o">=</span> <span class="n">OpenSetDataLoader</span><span class="p">(</span>
    <span class="n">OpenSetDataLoaderConfig</span><span class="p">(</span>
        <span class="n">dataset_name</span><span class="o">=</span><span class="n">dataset_name</span><span class="p">,</span>
        <span class="n">filepath</span><span class="o">=</span><span class="n">filepath</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">logrecord</span> <span class="o">=</span> <span class="n">data_loader</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>

<span class="n">logrecord</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">FileNotFoundError</span>                         Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[1], line 9</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span> filepath <span style="color: rgb(98,98,98)">=</span> os<span style="color: rgb(98,98,98)">.</span>path<span style="color: rgb(98,98,98)">.</span>join(<span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">..</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">datasets</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">HealthApp_2000.log</span><span style="color: rgb(175,0,0)">&#34;</span>) <span style="color: rgb(95,135,135)"># Point to the target HealthApp.log dataset</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span> dataset_name <span style="color: rgb(98,98,98)">=</span> <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">HealthApp</span><span style="color: rgb(175,0,0)">&#34;</span>
<span class="ansi-green-fg">----&gt; 9</span> data_loader <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">OpenSetDataLoader</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">OpenSetDataLoaderConfig</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">dataset_name</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">dataset_name</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-yellow-bg">        </span><span class="ansi-yellow-bg">filepath</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">=</span><span class="ansi-yellow-bg">filepath</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     13</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> logrecord <span style="color: rgb(98,98,98)">=</span> data_loader<span style="color: rgb(98,98,98)">.</span>load_data()
<span class="ansi-green-intense-fg ansi-bold">     17</span> logrecord<span style="color: rgb(98,98,98)">.</span>to_dataframe()<span style="color: rgb(98,98,98)">.</span>head(<span style="color: rgb(98,98,98)">5</span>)

File <span class="ansi-green-fg">~/work/logai/logai/venv/lib/python3.10/site-packages/logai/dataloader/openset_data_loader.py:39</span>, in <span class="ansi-cyan-fg">OpenSetDataLoader.__init__</span><span class="ansi-blue-fg">(self, config)</span>
<span class="ansi-green-intense-fg ansi-bold">     38</span> <span class="ansi-bold" style="color: rgb(0,135,0)">def</span> <span style="color: rgb(0,0,255)">__init__</span>(<span style="color: rgb(0,135,0)">self</span>, config: OpenSetDataLoaderConfig):
<span class="ansi-green-fg">---&gt; 39</span>     <span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_dl_config <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">get_config</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">config</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">dataset_name</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">config</span><span class="ansi-yellow-bg" style="color: rgb(98,98,98)">.</span><span class="ansi-yellow-bg">filepath</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     40</span>     <span style="color: rgb(0,135,0)">super</span>()<span style="color: rgb(98,98,98)">.</span><span style="color: rgb(0,0,255)">__init__</span>(<span style="color: rgb(0,135,0)">self</span><span style="color: rgb(98,98,98)">.</span>_dl_config)
<span class="ansi-green-intense-fg ansi-bold">     41</span>     <span class="ansi-bold" style="color: rgb(0,135,0)">return</span>

File <span class="ansi-green-fg">~/work/logai/logai/venv/lib/python3.10/site-packages/logai/dataloader/openset_data_loader.py:25</span>, in <span class="ansi-cyan-fg">get_config</span><span class="ansi-blue-fg">(dataset_name, filepath)</span>
<span class="ansi-green-intense-fg ansi-bold">     18</span> <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     19</span> <span style="color: rgb(175,0,0)">Retrieve the configuration of open log datasets to load data</span>
<span class="ansi-green-intense-fg ansi-bold">     20</span> <span style="color: rgb(175,0,0)">:param dataset_name: supported log dataset name from (&#34;hdfs&#34;, &#34;bgl&#34;, &#34;HealthApp&#34;)</span>
<span class="ansi-green-intense-fg ansi-bold">     21</span> <span style="color: rgb(175,0,0)">:param filepath: log file path</span>
<span class="ansi-green-intense-fg ansi-bold">     22</span> <span style="color: rgb(175,0,0)">:return: DataLoaderConfig: the configuration to load open log datasets</span>
<span class="ansi-green-intense-fg ansi-bold">     23</span> <span style="color: rgb(175,0,0)">&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">     24</span> config_path <span style="color: rgb(98,98,98)">=</span> os<span style="color: rgb(98,98,98)">.</span>path<span style="color: rgb(98,98,98)">.</span>join(os<span style="color: rgb(98,98,98)">.</span>path<span style="color: rgb(98,98,98)">.</span>dirname(<span style="color: rgb(0,0,135)">__file__</span>), <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">openset_configs</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span class="ansi-bold" style="color: rgb(175,95,135)">{}</span><span style="color: rgb(175,0,0)">.json</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(98,98,98)">.</span>format(dataset_name<span style="color: rgb(98,98,98)">.</span>lower()))
<span class="ansi-green-fg">---&gt; 25</span> <span class="ansi-bold" style="color: rgb(0,135,0)">with</span> <span class="ansi-yellow-bg" style="color: rgb(0,135,0)">open</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">config_path</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">r</span><span class="ansi-yellow-bg" style="color: rgb(175,0,0)">&#34;</span><span class="ansi-yellow-bg">)</span> <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> f:
<span class="ansi-green-intense-fg ansi-bold">     26</span>     config <span style="color: rgb(98,98,98)">=</span> DataLoaderConfig<span style="color: rgb(98,98,98)">.</span>from_dict(json<span style="color: rgb(98,98,98)">.</span>load(f))
<span class="ansi-green-intense-fg ansi-bold">     27</span> config<span style="color: rgb(98,98,98)">.</span>filepath <span style="color: rgb(98,98,98)">=</span> filepath

<span class="ansi-red-fg">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;/home/runner/work/logai/logai/venv/lib/python3.10/site-packages/logai/dataloader/openset_configs/healthapp.json&#39;
</pre></div></div>
</div>
</section>
<section id="Preprocess">
<h2>Preprocess<a class="headerlink" href="#Preprocess" title="Permalink to this heading">¶</a></h2>
<p>In preprocessing step user can retrieve and replace any regex strings and clean the raw loglines. This can be very useful to improve information extraction of the unstructured part of logs, as well as generate more structured attributes with domain knowledge.</p>
<p>Here in the example, we use the below regex to retrieve IP addresses.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.preprocess.preprocessor</span> <span class="kn">import</span> <span class="n">PreprocessorConfig</span><span class="p">,</span> <span class="n">Preprocessor</span>
<span class="kn">from</span> <span class="nn">logai.utils</span> <span class="kn">import</span> <span class="n">constants</span>

<span class="n">loglines</span> <span class="o">=</span> <span class="n">logrecord</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="n">constants</span><span class="o">.</span><span class="n">LOGLINE_NAME</span><span class="p">]</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="n">logrecord</span><span class="o">.</span><span class="n">attributes</span>

<span class="n">preprocessor_config</span> <span class="o">=</span> <span class="n">PreprocessorConfig</span><span class="p">(</span>
    <span class="n">custom_replace_list</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="sa">r</span><span class="s2">&quot;\d+\.\d+\.\d+\.\d+&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;IP&gt;&quot;</span><span class="p">],</span>   <span class="c1"># retrieve all IP addresses and replace with &lt;IP&gt; tag in the original string.</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">preprocessor</span> <span class="o">=</span> <span class="n">Preprocessor</span><span class="p">(</span><span class="n">preprocessor_config</span><span class="p">)</span>

<span class="n">clean_logs</span><span class="p">,</span> <span class="n">custom_patterns</span> <span class="o">=</span> <span class="n">preprocessor</span><span class="o">.</span><span class="n">clean_log</span><span class="p">(</span>
    <span class="n">loglines</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[2], line 4</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">preprocess</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">preprocessor</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> PreprocessorConfig, Preprocessor
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">utils</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> constants
<span class="ansi-green-fg">----&gt; 4</span> loglines <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">logrecord</span><span style="color: rgb(98,98,98)">.</span>body[constants<span style="color: rgb(98,98,98)">.</span>LOGLINE_NAME]
<span class="ansi-green-intense-fg ansi-bold">      5</span> attributes <span style="color: rgb(98,98,98)">=</span> logrecord<span style="color: rgb(98,98,98)">.</span>attributes
<span class="ansi-green-intense-fg ansi-bold">      7</span> preprocessor_config <span style="color: rgb(98,98,98)">=</span> PreprocessorConfig(
<span class="ansi-green-intense-fg ansi-bold">      8</span>     custom_replace_list<span style="color: rgb(98,98,98)">=</span>[
<span class="ansi-green-intense-fg ansi-bold">      9</span>         [<span style="color: rgb(175,0,0)">r</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d+</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">.</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d+</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">.</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d+</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">.</span><span style="color: rgb(175,0,0)">\</span><span style="color: rgb(175,0,0)">d+</span><span style="color: rgb(175,0,0)">&#34;</span>, <span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">&lt;IP&gt;</span><span style="color: rgb(175,0,0)">&#34;</span>],   <span style="color: rgb(95,135,135)"># retrieve all IP addresses and replace with &lt;IP&gt; tag in the original string.</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span>     ]
<span class="ansi-green-intense-fg ansi-bold">     11</span> )

<span class="ansi-red-fg">NameError</span>: name &#39;logrecord&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Parsing">
<h2>Parsing<a class="headerlink" href="#Parsing" title="Permalink to this heading">¶</a></h2>
<p>After preprocessing, we call auto-parsing algorithms to automatically parse the cleaned logs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.information_extraction.log_parser</span> <span class="kn">import</span> <span class="n">LogParser</span><span class="p">,</span> <span class="n">LogParserConfig</span>
<span class="kn">from</span> <span class="nn">logai.algorithms.parsing_algo.drain</span> <span class="kn">import</span> <span class="n">DrainParams</span>

<span class="c1"># parsing</span>
<span class="n">parsing_algo_params</span> <span class="o">=</span> <span class="n">DrainParams</span><span class="p">(</span>
    <span class="n">sim_th</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">5</span>
<span class="p">)</span>

<span class="n">log_parser_config</span> <span class="o">=</span> <span class="n">LogParserConfig</span><span class="p">(</span>
    <span class="n">parsing_algorithm</span><span class="o">=</span><span class="s2">&quot;drain&quot;</span><span class="p">,</span>
    <span class="n">parsing_algo_params</span><span class="o">=</span><span class="n">parsing_algo_params</span>
<span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">LogParser</span><span class="p">(</span><span class="n">log_parser_config</span><span class="p">)</span>
<span class="n">parsed_result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">clean_logs</span><span class="p">)</span>

<span class="n">parsed_loglines</span> <span class="o">=</span> <span class="n">parsed_result</span><span class="p">[</span><span class="s1">&#39;parsed_logline&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[3], line 15</span>
<span class="ansi-green-intense-fg ansi-bold">      9</span> log_parser_config <span style="color: rgb(98,98,98)">=</span> LogParserConfig(
<span class="ansi-green-intense-fg ansi-bold">     10</span>     parsing_algorithm<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">drain</span><span style="color: rgb(175,0,0)">&#34;</span>,
<span class="ansi-green-intense-fg ansi-bold">     11</span>     parsing_algo_params<span style="color: rgb(98,98,98)">=</span>parsing_algo_params
<span class="ansi-green-intense-fg ansi-bold">     12</span> )
<span class="ansi-green-intense-fg ansi-bold">     14</span> parser <span style="color: rgb(98,98,98)">=</span> LogParser(log_parser_config)
<span class="ansi-green-fg">---&gt; 15</span> parsed_result <span style="color: rgb(98,98,98)">=</span> parser<span style="color: rgb(98,98,98)">.</span>parse(<span class="ansi-yellow-bg">clean_logs</span>)
<span class="ansi-green-intense-fg ansi-bold">     17</span> parsed_loglines <span style="color: rgb(98,98,98)">=</span> parsed_result[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">parsed_logline</span><span style="color: rgb(175,0,0)">&#39;</span>]

<span class="ansi-red-fg">NameError</span>: name &#39;clean_logs&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Time-series-Anomaly-Detection">
<h2>Time-series Anomaly Detection<a class="headerlink" href="#Time-series-Anomaly-Detection" title="Permalink to this heading">¶</a></h2>
<p>Here we show an example to conduct time-series anomaly detection with parsed logs.</p>
<section id="Feature-Extraction">
<h3>Feature Extraction<a class="headerlink" href="#Feature-Extraction" title="Permalink to this heading">¶</a></h3>
<p>After parsing the logs and get log templates, we can extract timeseries features by coverting these parsed loglines into counter vectors.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.information_extraction.feature_extractor</span> <span class="kn">import</span> <span class="n">FeatureExtractorConfig</span><span class="p">,</span> <span class="n">FeatureExtractor</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">FeatureExtractorConfig</span><span class="p">(</span>
    <span class="n">group_by_time</span><span class="o">=</span><span class="s2">&quot;15min&quot;</span><span class="p">,</span>
    <span class="n">group_by_category</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;parsed_logline&#39;</span><span class="p">,</span> <span class="s1">&#39;Action&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">feature_extractor</span> <span class="o">=</span> <span class="n">FeatureExtractor</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="n">timestamps</span> <span class="o">=</span> <span class="n">logrecord</span><span class="o">.</span><span class="n">timestamp</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span>
<span class="n">parsed_loglines</span> <span class="o">=</span> <span class="n">parsed_result</span><span class="p">[</span><span class="s1">&#39;parsed_logline&#39;</span><span class="p">]</span>
<span class="n">counter_vector</span> <span class="o">=</span> <span class="n">feature_extractor</span><span class="o">.</span><span class="n">convert_to_counter_vector</span><span class="p">(</span>
    <span class="n">log_pattern</span><span class="o">=</span><span class="n">parsed_loglines</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>
    <span class="n">timestamps</span><span class="o">=</span><span class="n">timestamps</span>
<span class="p">)</span>

<span class="n">counter_vector</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[4], line 10</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> config <span style="color: rgb(98,98,98)">=</span> FeatureExtractorConfig(
<span class="ansi-green-intense-fg ansi-bold">      4</span>     group_by_time<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">15min</span><span style="color: rgb(175,0,0)">&#34;</span>,
<span class="ansi-green-intense-fg ansi-bold">      5</span>     group_by_category<span style="color: rgb(98,98,98)">=</span>[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">parsed_logline</span><span style="color: rgb(175,0,0)">&#39;</span>, <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">Action</span><span style="color: rgb(175,0,0)">&#39;</span>, <span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">ID</span><span style="color: rgb(175,0,0)">&#39;</span>],
<span class="ansi-green-intense-fg ansi-bold">      6</span> )
<span class="ansi-green-intense-fg ansi-bold">      8</span> feature_extractor <span style="color: rgb(98,98,98)">=</span> FeatureExtractor(config)
<span class="ansi-green-fg">---&gt; 10</span> timestamps <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">logrecord</span><span style="color: rgb(98,98,98)">.</span>timestamp[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">timestamp</span><span style="color: rgb(175,0,0)">&#39;</span>]
<span class="ansi-green-intense-fg ansi-bold">     11</span> parsed_loglines <span style="color: rgb(98,98,98)">=</span> parsed_result[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">parsed_logline</span><span style="color: rgb(175,0,0)">&#39;</span>]
<span class="ansi-green-intense-fg ansi-bold">     12</span> counter_vector <span style="color: rgb(98,98,98)">=</span> feature_extractor<span style="color: rgb(98,98,98)">.</span>convert_to_counter_vector(
<span class="ansi-green-intense-fg ansi-bold">     13</span>     log_pattern<span style="color: rgb(98,98,98)">=</span>parsed_loglines,
<span class="ansi-green-intense-fg ansi-bold">     14</span>     attributes<span style="color: rgb(98,98,98)">=</span>attributes,
<span class="ansi-green-intense-fg ansi-bold">     15</span>     timestamps<span style="color: rgb(98,98,98)">=</span>timestamps
<span class="ansi-green-intense-fg ansi-bold">     16</span> )

<span class="ansi-red-fg">NameError</span>: name &#39;logrecord&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Anomaly-Detection">
<h3>Anomaly Detection<a class="headerlink" href="#Anomaly-Detection" title="Permalink to this heading">¶</a></h3>
<p>With the generated <code class="docutils literal notranslate"><span class="pre">counter_vcetor</span></code>, you can use <code class="docutils literal notranslate"><span class="pre">AnomalyDetector</span></code> to detect timeseries anomalies. Here we use an algorithm in Merlion library called <code class="docutils literal notranslate"><span class="pre">DynamicBaseLine</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.analysis.anomaly_detector</span> <span class="kn">import</span> <span class="n">AnomalyDetector</span><span class="p">,</span> <span class="n">AnomalyDetectionConfig</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">counter_vector</span><span class="p">[</span><span class="s2">&quot;attribute&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">counter_vector</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">constants</span><span class="o">.</span><span class="n">LOG_COUNTS</span><span class="p">,</span>
                    <span class="n">constants</span><span class="o">.</span><span class="n">LOG_TIMESTAMPS</span><span class="p">,</span>
                    <span class="n">constants</span><span class="o">.</span><span class="n">EVENT_INDEX</span>
                <span class="p">],</span>
                <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;-&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
            <span class="p">)</span>

<span class="n">attr_list</span> <span class="o">=</span> <span class="n">counter_vector</span><span class="p">[</span><span class="s2">&quot;attribute&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="n">anomaly_detection_config</span> <span class="o">=</span> <span class="n">AnomalyDetectionConfig</span><span class="p">(</span>
    <span class="n">algo_name</span><span class="o">=</span><span class="s1">&#39;dbl&#39;</span>
<span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attr_list</span><span class="p">:</span>
    <span class="n">temp_df</span> <span class="o">=</span> <span class="n">counter_vector</span><span class="p">[</span><span class="n">counter_vector</span><span class="p">[</span><span class="s2">&quot;attribute&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">attr</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">constants</span><span class="o">.</span><span class="n">MIN_TS_LENGTH</span><span class="p">:</span>
        <span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
            <span class="n">temp_df</span><span class="p">[[</span><span class="n">constants</span><span class="o">.</span><span class="n">LOG_TIMESTAMPS</span><span class="p">,</span> <span class="n">constants</span><span class="o">.</span><span class="n">LOG_COUNTS</span><span class="p">]],</span>
            <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">train_size</span><span class="o">=</span><span class="mf">0.3</span>
        <span class="p">)</span>
        <span class="n">anomaly_detector</span> <span class="o">=</span> <span class="n">AnomalyDetector</span><span class="p">(</span><span class="n">anomaly_detection_config</span><span class="p">)</span>
        <span class="n">anomaly_detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
        <span class="n">anom_score</span> <span class="o">=</span> <span class="n">anomaly_detector</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">anom_score</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[5], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">analysis</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">anomaly_detector</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> AnomalyDetector, AnomalyDetectionConfig
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">sklearn</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">model_selection</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> train_test_split
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> <span class="ansi-bold" style="color: rgb(0,0,255)">pandas</span> <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> <span class="ansi-bold" style="color: rgb(0,0,255)">pd</span>

File <span class="ansi-green-fg">~/work/logai/logai/venv/lib/python3.10/site-packages/logai/analysis/anomaly_detector.py:9</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span style="color: rgb(95,135,135)">#</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span style="color: rgb(95,135,135)"># Copyright (c) 2022 Salesforce.com, inc.</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span style="color: rgb(95,135,135)"># All rights reserved.</span>
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span> <span style="color: rgb(95,135,135)">#</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span> <span style="color: rgb(95,135,135)">#</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> <span class="ansi-bold" style="color: rgb(0,0,255)">pandas</span> <span class="ansi-bold" style="color: rgb(0,135,0)">as</span> <span class="ansi-bold" style="color: rgb(0,0,255)">pd</span>
<span class="ansi-green-fg">----&gt; 9</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algorithms</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">anomaly_detection_algo</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">attr</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> dataclass
<span class="ansi-green-intense-fg ansi-bold">     12</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">config_interfaces</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> Config

File <span class="ansi-green-fg">~/work/logai/logai/venv/lib/python3.10/site-packages/logai/algorithms/anomaly_detection_algo/__init__.py:12</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">distribution_divergence</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> DistributionDivergence
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">ets</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> ETSDetector
<span class="ansi-green-fg">---&gt; 12</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">forecast_nn</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> ForecastBasedLSTM, ForecastBasedCNN, ForecastBasedTransformer
<span class="ansi-green-intense-fg ansi-bold">     13</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">isolation_forest</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> IsolationForestDetector
<span class="ansi-green-intense-fg ansi-bold">     14</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">local_outlier_factor</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> LOFDetector

File <span class="ansi-green-fg">~/work/logai/logai/venv/lib/python3.10/site-packages/logai/algorithms/anomaly_detection_algo/forecast_nn.py:2</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algorithms</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algo_interfaces</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> NNAnomalyDetectionAlgo
<span class="ansi-green-fg">----&gt; 2</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algorithms</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">nn_model</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">forecast_nn</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">base_nn</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> ForecastBasedNNParams
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algorithms</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">vectorization_algo</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">forecast_nn</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> ForecastNNVectorizedDataset
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algorithms</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">nn_model</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">forecast_nn</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">lstm</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> LSTM, LSTMParams

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;logai.algorithms.nn_model.forecast_nn&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get anomalous datapoints</span>
<span class="n">anomalies</span> <span class="o">=</span> <span class="n">counter_vector</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">res</span><span class="p">[</span><span class="n">res</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="n">anomalies</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[6], line 2</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span style="color: rgb(95,135,135)"># Get anomalous datapoints</span>
<span class="ansi-green-fg">----&gt; 2</span> anomalies <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">counter_vector</span><span style="color: rgb(98,98,98)">.</span>iloc[res[res<span style="color: rgb(98,98,98)">&gt;</span><span style="color: rgb(98,98,98)">0</span>]<span style="color: rgb(98,98,98)">.</span>index]
<span class="ansi-green-intense-fg ansi-bold">      3</span> anomalies<span style="color: rgb(98,98,98)">.</span>head(<span style="color: rgb(98,98,98)">5</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;counter_vector&#39; is not defined
</pre></div></div>
</div>
</section>
</section>
<section id="Semantic-Anomaly-Detection">
<h2>Semantic Anomaly Detection<a class="headerlink" href="#Semantic-Anomaly-Detection" title="Permalink to this heading">¶</a></h2>
<p>We can also use the log template for semantic based anomaly detection. In this approach, we retrieve the semantic features from the logs. This includes two parts: vectorizing the unstructured log templates and encoding the structured log attributes.</p>
<section id="Vectorization-for-unstructured-loglines">
<h3>Vectorization for unstructured loglines<a class="headerlink" href="#Vectorization-for-unstructured-loglines" title="Permalink to this heading">¶</a></h3>
<p>Here we use <code class="docutils literal notranslate"><span class="pre">word2vec</span></code> to vectorize unstructured part of the logs. The output will be a list of numeric vectors that representing the semantic features of these log templates.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.information_extraction.log_vectorizer</span> <span class="kn">import</span> <span class="n">VectorizerConfig</span><span class="p">,</span> <span class="n">LogVectorizer</span>

<span class="n">vectorizer_config</span> <span class="o">=</span> <span class="n">VectorizerConfig</span><span class="p">(</span>
    <span class="n">algo_name</span> <span class="o">=</span> <span class="s2">&quot;word2vec&quot;</span>
<span class="p">)</span>

<span class="n">vectorizer</span> <span class="o">=</span> <span class="n">LogVectorizer</span><span class="p">(</span>
    <span class="n">vectorizer_config</span>
<span class="p">)</span>

<span class="c1"># Train vectorizer</span>
<span class="n">vectorizer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">parsed_loglines</span><span class="p">)</span>

<span class="c1"># Transform the loglines into features</span>
<span class="n">log_vectors</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">parsed_loglines</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[7], line 12</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span> vectorizer <span style="color: rgb(98,98,98)">=</span> LogVectorizer(
<span class="ansi-green-intense-fg ansi-bold">      8</span>     vectorizer_config
<span class="ansi-green-intense-fg ansi-bold">      9</span> )
<span class="ansi-green-intense-fg ansi-bold">     11</span> <span style="color: rgb(95,135,135)"># Train vectorizer</span>
<span class="ansi-green-fg">---&gt; 12</span> vectorizer<span style="color: rgb(98,98,98)">.</span>fit(<span class="ansi-yellow-bg">parsed_loglines</span>)
<span class="ansi-green-intense-fg ansi-bold">     14</span> <span style="color: rgb(95,135,135)"># Transform the loglines into features</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> log_vectors <span style="color: rgb(98,98,98)">=</span> vectorizer<span style="color: rgb(98,98,98)">.</span>transform(parsed_loglines)

<span class="ansi-red-fg">NameError</span>: name &#39;parsed_loglines&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="Categorical-Encoding-for-log-attributes">
<h3>Categorical Encoding for log attributes<a class="headerlink" href="#Categorical-Encoding-for-log-attributes" title="Permalink to this heading">¶</a></h3>
<p>We also do categorical encoding for log attributes to convert the strings into numerical representations.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.information_extraction.categorical_encoder</span> <span class="kn">import</span> <span class="n">CategoricalEncoderConfig</span><span class="p">,</span> <span class="n">CategoricalEncoder</span>

<span class="n">encoder_config</span> <span class="o">=</span> <span class="n">CategoricalEncoderConfig</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;label_encoder&quot;</span><span class="p">)</span>

<span class="n">encoder</span> <span class="o">=</span> <span class="n">CategoricalEncoder</span><span class="p">(</span><span class="n">encoder_config</span><span class="p">)</span>

<span class="n">attributes_encoded</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[8], line 7</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> encoder_config <span style="color: rgb(98,98,98)">=</span> CategoricalEncoderConfig(name<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(175,0,0)">&#34;</span><span style="color: rgb(175,0,0)">label_encoder</span><span style="color: rgb(175,0,0)">&#34;</span>)
<span class="ansi-green-intense-fg ansi-bold">      5</span> encoder <span style="color: rgb(98,98,98)">=</span> CategoricalEncoder(encoder_config)
<span class="ansi-green-fg">----&gt; 7</span> attributes_encoded <span style="color: rgb(98,98,98)">=</span> encoder<span style="color: rgb(98,98,98)">.</span>fit_transform(<span class="ansi-yellow-bg">attributes</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;attributes&#39; is not defined
</pre></div></div>
</div>
</section>
<section id="id1">
<h3>Feature Extraction<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>Then we extract and concate the semantic features for both the unstructured and structured part of logs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">logai.information_extraction.feature_extractor</span> <span class="kn">import</span> <span class="n">FeatureExtractorConfig</span><span class="p">,</span> <span class="n">FeatureExtractor</span>

<span class="n">timestamps</span> <span class="o">=</span> <span class="n">logrecord</span><span class="o">.</span><span class="n">timestamp</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">FeatureExtractorConfig</span><span class="p">(</span>
    <span class="n">max_feature_len</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>

<span class="n">feature_extractor</span> <span class="o">=</span> <span class="n">FeatureExtractor</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="n">_</span><span class="p">,</span> <span class="n">feature_vector</span> <span class="o">=</span> <span class="n">feature_extractor</span><span class="o">.</span><span class="n">convert_to_feature_vector</span><span class="p">(</span><span class="n">log_vectors</span><span class="p">,</span> <span class="n">attributes_encoded</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[9], line 3</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">information_extraction</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">feature_extractor</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> FeatureExtractorConfig, FeatureExtractor
<span class="ansi-green-fg">----&gt; 3</span> timestamps <span style="color: rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">logrecord</span><span style="color: rgb(98,98,98)">.</span>timestamp[<span style="color: rgb(175,0,0)">&#39;</span><span style="color: rgb(175,0,0)">timestamp</span><span style="color: rgb(175,0,0)">&#39;</span>]
<span class="ansi-green-intense-fg ansi-bold">      5</span> config <span style="color: rgb(98,98,98)">=</span> FeatureExtractorConfig(
<span class="ansi-green-intense-fg ansi-bold">      6</span>     max_feature_len<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">100</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span> )
<span class="ansi-green-intense-fg ansi-bold">      9</span> feature_extractor <span style="color: rgb(98,98,98)">=</span> FeatureExtractor(config)

<span class="ansi-red-fg">NameError</span>: name &#39;logrecord&#39; is not defined
</pre></div></div>
</div>
</section>
</section>
<section id="id2">
<h2>Anomaly Detection<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p>With the extracted log semantic feature set, we can perform anomaly detection to find the abnormal logs. Here we use <code class="docutils literal notranslate"><span class="pre">isolation_forest</span></code> as an example.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="n">train</span><span class="p">,</span> <span class="n">test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">feature_vector</span><span class="p">,</span> <span class="n">train_size</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">logai.algorithms.anomaly_detection_algo.isolation_forest</span> <span class="kn">import</span> <span class="n">IsolationForestParams</span>
<span class="kn">from</span> <span class="nn">logai.analysis.anomaly_detector</span> <span class="kn">import</span> <span class="n">AnomalyDetectionConfig</span><span class="p">,</span> <span class="n">AnomalyDetector</span>

<span class="n">algo_params</span> <span class="o">=</span> <span class="n">IsolationForestParams</span><span class="p">(</span>
    <span class="n">n_estimators</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">max_features</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">AnomalyDetectionConfig</span><span class="p">(</span>
    <span class="n">algo_name</span><span class="o">=</span><span class="s1">&#39;isolation_forest&#39;</span><span class="p">,</span>
    <span class="n">algo_params</span><span class="o">=</span><span class="n">algo_params</span>
<span class="p">)</span>

<span class="n">anomaly_detector</span> <span class="o">=</span> <span class="n">AnomalyDetector</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
<span class="n">anomaly_detector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">train</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">anomaly_detector</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="c1"># obtain the anomalous datapoints</span>
<span class="n">anomalies</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="n">res</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[10], line 3</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">sklearn</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">model_selection</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> train_test_split
<span class="ansi-green-fg">----&gt; 3</span> train, test <span style="color: rgb(98,98,98)">=</span> train_test_split(<span class="ansi-yellow-bg">feature_vector</span>, train_size<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">0.7</span>, test_size<span style="color: rgb(98,98,98)">=</span><span style="color: rgb(98,98,98)">0.3</span>)
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">algorithms</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">anomaly_detection_algo</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">isolation_forest</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> IsolationForestParams
<span class="ansi-green-intense-fg ansi-bold">      6</span> <span class="ansi-bold" style="color: rgb(0,135,0)">from</span> <span class="ansi-bold" style="color: rgb(0,0,255)">logai</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">analysis</span><span class="ansi-bold" style="color: rgb(0,0,255)">.</span><span class="ansi-bold" style="color: rgb(0,0,255)">anomaly_detector</span> <span class="ansi-bold" style="color: rgb(0,135,0)">import</span> AnomalyDetectionConfig, AnomalyDetector

<span class="ansi-red-fg">NameError</span>: name &#39;feature_vector&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">loglines</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">anomalies</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[11], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">loglines</span><span style="color: rgb(98,98,98)">.</span>iloc[anomalies<span style="color: rgb(98,98,98)">.</span>index]<span style="color: rgb(98,98,98)">.</span>head(<span style="color: rgb(98,98,98)">5</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;loglines&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">attributes</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">anomalies</span><span class="o">.</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
Cell <span class="ansi-green-fg">In[12], line 1</span>
<span class="ansi-green-fg">----&gt; 1</span> <span class="ansi-yellow-bg">attributes</span><span style="color: rgb(98,98,98)">.</span>iloc[anomalies<span style="color: rgb(98,98,98)">.</span>index]<span style="color: rgb(98,98,98)">.</span>head(<span style="color: rgb(98,98,98)">5</span>)

<span class="ansi-red-fg">NameError</span>: name &#39;attributes&#39; is not defined
</pre></div></div>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="tutorial_log_clustering.html" class="btn btn-neutral float-right" title="Tutorial: Log Clustering using LogAI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../tutorial.html" class="btn btn-neutral float-left" title="Tutorials" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Salesforce.com, Inc..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>